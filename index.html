<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>P3 AI Risk Assessment Tool</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Light mode colors */
            --primary-color: #7cb342;
            --primary-dark: #558b2f;
            --primary-light: #aed581;
            --secondary-color: #66bb6a;
            --accent-color: #ffa726;
            --background-gradient-start: #e8f5e9;
            --background-gradient-end: #c5e1a5;
            --card-bg: rgba(255, 255, 255, 0.95);
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --text-primary: #1b5e20;
            --text-secondary: #558b2f;
            --text-muted: #689f38;
            --shadow-color: rgba(0, 0, 0, 0.1);
            --shadow-hover: rgba(0, 0, 0, 0.15);
            --border-color: #e0e0e0;
            --section-bg: #f1f8e9;
            --input-bg: #ffffff;
            --input-border: #c5e1a5;
            --hover-bg: #f1f8e9;
            
            /* Modern spacing system */
            --space-xs: clamp(4px, 0.5vw, 8px);
            --space-sm: clamp(8px, 1vw, 12px);
            --space-md: clamp(12px, 2vw, 16px);
            --space-lg: clamp(16px, 3vw, 24px);
            --space-xl: clamp(24px, 4vw, 32px);
            --space-2xl: clamp(32px, 5vw, 48px);
            
            /* Modern border radius system */
            --radius-sm: clamp(8px, 1vw, 12px);
            --radius-md: clamp(12px, 1.5vw, 16px);
            --radius-lg: clamp(16px, 2vw, 24px);
            --radius-xl: clamp(20px, 3vw, 32px);
            --radius-full: 9999px;
            
            /* Responsive grid minimum */
            --grid-min-width: 280px;
        }

        [data-theme="dark"] {
            /* Dark mode colors */
            --primary-color: #9ccc65;
            --primary-dark: #7cb342;
            --primary-light: #c5e1a5;
            --secondary-color: #81c784;
            --accent-color: #ffb74d;
            --background-gradient-start: #1a1a2e;
            --background-gradient-end: #16213e;
            --card-bg: rgba(30, 30, 45, 0.95);
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --text-primary: #e8f5e9;
            --text-secondary: #c5e1a5;
            --text-muted: #a5d6a7;
            --shadow-color: rgba(0, 0, 0, 0.3);
            --shadow-hover: rgba(0, 0, 0, 0.4);
            --border-color: #424242;
            --section-bg: rgba(40, 40, 60, 0.6);
            --input-bg: rgba(50, 50, 70, 0.8);
            --input-border: #558b2f;
            --hover-bg: rgba(60, 60, 80, 0.6);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(40px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInFromLeft {
            from {
                opacity: 0;
                transform: translateX(-60px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInFromRight {
            from {
                opacity: 0;
                transform: translateX(60px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }

        @keyframes shimmer {
            0% {
                background-position: -1000px 0;
            }
            100% {
                background-position: 1000px 0;
            }
        }
        
        @keyframes parallaxFloat {
            0%, 100% {
                transform: translateY(0px);
            }
            50% {
                transform: translateY(-20px);
            }
        }
        
        /* Scroll reveal classes */
        .scroll-reveal {
            opacity: 0;
            transform: translateY(60px);
            transition: opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1), 
                        transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .scroll-reveal.revealed {
            opacity: 1;
            transform: translateY(0);
        }
        
        .scroll-reveal-left {
            opacity: 0;
            transform: translateX(-60px);
            transition: opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1), 
                        transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .scroll-reveal-left.revealed {
            opacity: 1;
            transform: translateX(0);
        }
        
        .scroll-reveal-right {
            opacity: 0;
            transform: translateX(60px);
            transition: opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1), 
                        transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .scroll-reveal-right.revealed {
            opacity: 1;
            transform: translateX(0);
        }
        
        .scroll-reveal-scale {
            opacity: 0;
            transform: scale(0.9);
            transition: opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1), 
                        transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .scroll-reveal-scale.revealed {
            opacity: 1;
            transform: scale(1);
        }

        html {
            scroll-behavior: smooth;
            scroll-padding-top: 80px;
        }
        
        /* Scroll snap for smooth section-by-section scrolling */
        body.scroll-snap-enabled {
            scroll-snap-type: y mandatory;
            overflow-y: scroll;
            height: 100vh;
        }
        
        .scroll-section {
            scroll-snap-align: start;
            scroll-snap-stop: always;
            min-height: 100vh;
            position: relative;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, var(--background-gradient-start) 0%, var(--background-gradient-end) 100%);
            background-attachment: fixed;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            color: var(--text-primary);
            transition: background 0.3s ease, color 0.3s ease;
            position: relative;
            overflow-x: hidden;
            font-size: clamp(14px, 1vw, 16px);
            line-height: 1.6;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 50%, rgba(124, 179, 66, 0.12) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(102, 187, 106, 0.12) 0%, transparent 50%),
                radial-gradient(circle at 50% 20%, rgba(255, 167, 38, 0.08) 0%, transparent 40%);
            pointer-events: none;
            z-index: 0;
            animation: gradientShift 15s ease-in-out infinite;
        }
        
        @keyframes gradientShift {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.8;
            }
        }
        
        @media (prefers-reduced-motion: reduce) {
            body::before {
                animation: none;
            }
            
            .form-section,
            .result-card,
            .measure-item,
            .form-group,
            .risk-badge,
            .empty-state-icon {
                animation: none !important;
            }
            
            .container,
            .logo-container,
            .header,
            .language-toggle,
            .tab-content {
                animation-duration: 0.01ms !important;
            }
            
            * {
                transition-duration: 0.01ms !important;
            }
        }

        .logo-container {
            text-align: center;
            padding: clamp(100px, 15vh, 150px) var(--space-xl);
            position: relative;
            z-index: 1;
            animation: fadeIn 1.2s ease-out;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .logo-container img {
            height: clamp(100px, 15vw, 150px);
            width: auto;
            filter: drop-shadow(0 8px 32px rgba(124, 179, 66, 0.4));
            transition: transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1), 
                        filter 0.5s ease;
            animation: parallaxFloat 6s ease-in-out infinite;
        }

        .logo-container img:hover {
            transform: scale(1.1) rotate(5deg);
            filter: drop-shadow(0 12px 48px rgba(124, 179, 66, 0.6));
        }

        .container {
            max-width: 100%;
            width: 100%;
            margin: 0;
            background: transparent;
            border-radius: 0;
            box-shadow: none;
            overflow: visible;
            backdrop-filter: none;
            -webkit-backdrop-filter: none;
            animation: none;
            position: relative;
            z-index: 1;
            border: none;
        }
        
        .content-wrapper {
            max-width: min(1400px, 90vw);
            margin: 0 auto;
            padding: clamp(30px, 5vw, 50px) clamp(20px, 4vw, 40px);
            background: var(--card-bg);
            border-radius: clamp(20px, 3vw, 32px);
            box-shadow: 0 25px 80px -15px var(--shadow-color),
                        0 0 0 1px var(--glass-border) inset,
                        0 8px 32px rgba(0, 0, 0, 0.08);
            backdrop-filter: blur(30px) saturate(180%);
            -webkit-backdrop-filter: blur(30px) saturate(180%);
            border: 1px solid var(--glass-border);
        }
        
        /* Sticky header */
        .sticky-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border-bottom: 1px solid var(--border-color);
            transition: all 0.3s ease;
            transform: translateY(0);
        }
        
        [data-theme="dark"] .sticky-header {
            background: rgba(30, 30, 45, 0.9);
        }
        
        .sticky-header.hidden {
            transform: translateY(-100%);
        }
        
        .sticky-header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .sticky-logo {
            font-size: 24px;
            font-weight: 800;
            color: var(--primary-color);
            text-decoration: none;
        }
        
        .sticky-nav {
            display: flex;
            gap: 20px;
            align-items: center;
        }
        
        .sticky-nav-item {
            padding: 8px 16px;
            color: var(--text-primary);
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            border-radius: 20px;
        }
        
        .sticky-nav-item:hover {
            background: var(--hover-bg);
            color: var(--primary-color);
        }
        
        /* Scroll progress indicator */
        .scroll-progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
            z-index: 1001;
            transition: width 0.1s ease;
        }

        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 200px;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            opacity: 0.03;
            pointer-events: none;
        }

        .language-toggle {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            gap: clamp(12px, 2vw, 18px);
            padding: clamp(16px, 3vw, 24px) clamp(20px, 4vw, 35px);
            background: transparent;
            animation: slideInFromRight 0.8s ease-out;
        }

        .theme-toggle, .language-toggle button {
            padding: clamp(10px, 1.5vw, 14px) clamp(18px, 3vw, 26px);
            border: 2px solid var(--primary-color);
            background: var(--glass-bg);
            color: var(--primary-color);
            border-radius: 50px;
            cursor: pointer;
            font-weight: 700;
            font-size: clamp(13px, 1.5vw, 15px);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            position: relative;
            overflow: hidden;
            letter-spacing: 0.01em;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .theme-toggle::before, .language-toggle button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: var(--primary-color);
            transition: width 0.6s, height 0.6s, top 0.6s, left 0.6s;
            transform: translate(-50%, -50%);
            z-index: -1;
        }

        .theme-toggle:hover::before, .language-toggle button:hover::before {
            width: 300px;
            height: 300px;
        }

        .theme-toggle:hover, .language-toggle button:hover {
            color: white;
            border-color: var(--primary-dark);
            transform: translate3d(0, -3px, 0) scale(1.05);
            box-shadow: 0 12px 28px var(--shadow-hover),
                        0 4px 12px rgba(124, 179, 66, 0.3);
        }

        .theme-toggle:active, .language-toggle button:active {
            transform: translateY(0);
        }

        .header {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            padding: clamp(120px, 20vh, 200px) clamp(20px, 5vw, 40px);
            text-align: center;
            position: relative;
            overflow: hidden;
            animation: none;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            animation: shimmer 3s infinite;
        }

        .header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, 
                var(--primary-light) 0%, 
                var(--accent-color) 50%, 
                var(--primary-light) 100%);
            background-size: 200% 100%;
            animation: shimmer 2s linear infinite;
        }

        .header h1 {
            margin: 0 0 30px 0;
            font-size: clamp(40px, 8vw, 80px);
            font-weight: 800;
            letter-spacing: -0.03em;
            position: relative;
            z-index: 1;
            text-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            line-height: 1.1;
        }

        .header p {
            margin: 0;
            opacity: 0.95;
            font-size: clamp(18px, 3vw, 28px);
            font-weight: 500;
            position: relative;
            z-index: 1;
            letter-spacing: 0.01em;
            max-width: 800px;
        }

        .tabs {
            display: flex;
            background: var(--glass-bg);
            border-bottom: 2px solid var(--border-color);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            position: relative;
            overflow-x: auto;
            scrollbar-width: none;
            gap: clamp(4px, 1vw, 8px);
            padding: 0 clamp(8px, 2vw, 16px);
        }

        .tabs::-webkit-scrollbar {
            display: none;
        }

        .tab {
            flex: 1;
            padding: clamp(16px, 3vw, 24px) clamp(12px, 2vw, 20px);
            text-align: center;
            cursor: pointer;
            font-weight: 700;
            font-size: clamp(14px, 1.5vw, 16px);
            color: var(--text-muted);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border-bottom: 4px solid transparent;
            position: relative;
            min-width: clamp(130px, 20vw, 160px);
            background: transparent;
            letter-spacing: 0.01em;
        }

        .tab::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
            transform: scaleX(0);
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 2px 8px rgba(124, 179, 66, 0.5);
        }

        .tab:hover {
            background: var(--hover-bg);
            color: var(--text-secondary);
            transform: translate3d(0, -3px, 0) scale(1.02);
        }

        .tab.active {
            color: var(--primary-color);
            background: transparent;
        }

        .tab.active::before {
            transform: scaleX(1);
        }

        .content {
            padding: clamp(60px, 10vh, 100px) 0;
            animation: fadeIn 0.5s ease-out;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .form-grid {
            display: grid;
            gap: clamp(20px, 3vw, 35px);
            grid-template-columns: repeat(auto-fit, minmax(var(--grid-min-width), 1fr));
        }

        .form-section {
            background: var(--section-bg);
            padding: clamp(20px, 4vw, 35px);
            border-radius: clamp(12px, 2vw, 20px);
            border-left: 5px solid var(--primary-color);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.06),
                        0 2px 8px rgba(0, 0, 0, 0.04);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .form-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, transparent 0%, rgba(124, 179, 66, 0.02) 100%);
            pointer-events: none;
        }

        .form-section:hover {
            transform: translate3d(0, -8px, 0) scale(1.01);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.12),
                        0 8px 24px rgba(0, 0, 0, 0.08);
            border-left-width: 6px;
        }

        .section-title {
            font-size: clamp(18px, 2.5vw, 24px);
            font-weight: 800;
            color: var(--text-secondary);
            margin: 0 0 25px 0;
            display: flex;
            align-items: center;
            gap: 12px;
            position: relative;
            letter-spacing: -0.01em;
        }

        .section-title::before {
            content: '';
            width: 5px;
            height: clamp(20px, 3vw, 28px);
            background: linear-gradient(180deg, var(--primary-color), var(--accent-color));
            border-radius: 3px;
            box-shadow: 0 2px 8px rgba(124, 179, 66, 0.4);
        }

        .form-group {
            margin-bottom: 25px;
            animation: slideInFromLeft 0.5s ease-out backwards;
        }

        .form-group:nth-child(2) { animation-delay: 0.1s; }
        .form-group:nth-child(3) { animation-delay: 0.2s; }
        .form-group:nth-child(4) { animation-delay: 0.3s; }

        .form-group:last-child {
            margin-bottom: 0;
        }

        .form-label {
            display: block;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 12px;
            font-size: clamp(14px, 1.5vw, 16px);
            transition: color 0.3s ease;
            letter-spacing: 0.01em;
        }

        select, input {
            width: 100%;
            padding: clamp(12px, 2vw, 16px) clamp(14px, 2.5vw, 20px);
            border: 2px solid var(--input-border);
            border-radius: clamp(10px, 1.5vw, 14px);
            font-size: clamp(14px, 1.5vw, 16px);
            background: var(--input-bg);
            color: var(--text-primary);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            font-family: inherit;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            font-weight: 500;
        }

        select:hover, input:hover {
            border-color: var(--primary-color);
            background: var(--hover-bg);
        }

        select:focus, input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 4px rgba(124, 179, 66, 0.15),
                        0 8px 28px rgba(124, 179, 66, 0.25),
                        0 2px 8px rgba(0, 0, 0, 0.08);
            transform: translate3d(0, -3px, 0) scale(1.01);
        }
        
        select[multiple] {
            height: auto;
            min-height: 120px;
            padding: 10px;
        }

        select option {
            padding: 10px;
            border-radius: 6px;
            margin: 2px 0;
        }

        select option:checked {
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            color: white;
        }

        .result-card {
            background: var(--card-bg);
            padding: clamp(24px, 4vw, 35px);
            border-radius: clamp(14px, 2vw, 20px);
            margin-bottom: clamp(20px, 3vw, 30px);
            border: 2px solid var(--border-color);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.06),
                        0 2px 8px rgba(0, 0, 0, 0.04);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            animation: scaleIn 0.5s ease-out backwards;
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            position: relative;
            overflow: hidden;
        }

        .result-card:nth-child(1) { animation-delay: 0.1s; }
        .result-card:nth-child(2) { animation-delay: 0.2s; }
        .result-card:nth-child(3) { animation-delay: 0.3s; }
        .result-card:nth-child(4) { animation-delay: 0.4s; }
        .result-card:nth-child(5) { animation-delay: 0.5s; }

        .result-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(180deg, var(--primary-color), var(--accent-color));
        }

        .result-card:hover {
            transform: translate3d(0, -8px, 0) scale(1.01);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.12),
                        0 8px 24px rgba(0, 0, 0, 0.08);
            border-color: var(--primary-color);
        }

        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .result-title {
            font-size: clamp(17px, 2.5vw, 22px);
            font-weight: 800;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            gap: 12px;
            letter-spacing: -0.01em;
        }

        .risk-badge {
            padding: clamp(8px, 1.5vw, 12px) clamp(16px, 3vw, 24px);
            border-radius: 50px;
            font-weight: 800;
            font-size: clamp(12px, 1.5vw, 15px);
            letter-spacing: 0.08em;
            text-transform: uppercase;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15),
                        0 2px 8px rgba(0, 0, 0, 0.1);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            animation: pulse 2s ease-in-out infinite;
        }

        .risk-badge:hover {
            transform: translate3d(0, -2px, 0) scale(1.08);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2),
                        0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .risk-critical { 
            background: linear-gradient(135deg, #ff5252 0%, #f44336 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(244, 67, 54, 0.3);
        }
        .risk-high { 
            background: linear-gradient(135deg, #ff9800 0%, #ff5722 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(255, 152, 0, 0.3);
        }
        .risk-medium { 
            background: linear-gradient(135deg, #ffc107 0%, #ff9800 100%);
            color: #333;
            box-shadow: 0 4px 15px rgba(255, 193, 7, 0.3);
        }
        .risk-low { 
            background: linear-gradient(135deg, #8bc34a 0%, #66bb6a 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(139, 195, 74, 0.3);
        }
        .risk-minimal { 
            background: linear-gradient(135deg, #4caf50 0%, #8bc34a 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
        }

        .measure-item {
            background: var(--section-bg);
            padding: clamp(16px, 3vw, 24px);
            margin-bottom: clamp(12px, 2vw, 18px);
            border-left: 5px solid var(--primary-color);
            border-radius: clamp(10px, 1.5vw, 14px);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            animation: slideInFromLeft 0.5s ease-out backwards;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.06),
                        0 2px 6px rgba(0, 0, 0, 0.04);
        }

        .measure-item:nth-child(2) { animation-delay: 0.1s; }
        .measure-item:nth-child(3) { animation-delay: 0.2s; }
        .measure-item:nth-child(4) { animation-delay: 0.3s; }
        .measure-item:nth-child(5) { animation-delay: 0.4s; }
        .measure-item:nth-child(6) { animation-delay: 0.5s; }

        .measure-item:hover {
            transform: translate3d(12px, 0, 0) scale(1.01);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12),
                        0 2px 8px rgba(0, 0, 0, 0.06);
            border-left-width: 7px;
        }

        .measure-title {
            font-weight: 800;
            color: var(--text-secondary);
            margin-bottom: 10px;
            font-size: clamp(15px, 2vw, 18px);
            letter-spacing: -0.01em;
        }

        .action-buttons {
            display: flex;
            gap: clamp(12px, 2vw, 18px);
            justify-content: center;
            padding: clamp(30px, 5vw, 50px) clamp(20px, 4vw, 35px);
            background: var(--glass-bg);
            border-top: 2px solid var(--border-color);
            flex-wrap: wrap;
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
        }

        .btn {
            padding: clamp(12px, 2vw, 16px) clamp(28px, 4vw, 40px);
            border: none;
            border-radius: 50px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: clamp(14px, 1.5vw, 16px);
            position: relative;
            overflow: hidden;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.12),
                        0 2px 6px rgba(0, 0, 0, 0.08);
            letter-spacing: 0.02em;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transition: width 0.6s, height 0.6s, top 0.6s, left 0.6s;
            transform: translate(-50%, -50%);
        }

        .btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            border: 2px solid transparent;
        }

        .btn-primary:hover {
            transform: translate3d(0, -4px, 0) scale(1.02);
            box-shadow: 0 12px 36px rgba(124, 179, 66, 0.45),
                        0 4px 12px rgba(124, 179, 66, 0.3);
        }

        .btn-primary:active {
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: var(--card-bg);
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
        }

        .btn-secondary:hover {
            background: var(--primary-color);
            color: white;
            transform: translate3d(0, -4px, 0) scale(1.02);
            box-shadow: 0 12px 36px rgba(124, 179, 66, 0.35),
                        0 4px 12px rgba(124, 179, 66, 0.25);
        }

        .btn-secondary:active {
            transform: translateY(-1px);
        }

        .info-box {
            background: linear-gradient(135deg, rgba(227, 242, 253, 0.9) 0%, rgba(187, 222, 251, 0.9) 100%);
            padding: clamp(16px, 3vw, 24px);
            border-radius: clamp(10px, 1.5vw, 16px);
            margin-top: clamp(20px, 3vw, 28px);
            font-size: clamp(13px, 1.5vw, 15px);
            color: var(--text-primary);
            border-left: 5px solid #2196f3;
            box-shadow: 0 6px 20px rgba(33, 150, 243, 0.15),
                        0 2px 8px rgba(33, 150, 243, 0.1);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            line-height: 1.7;
        }

        [data-theme="dark"] .info-box {
            background: linear-gradient(135deg, rgba(30, 60, 90, 0.9) 0%, rgba(20, 50, 80, 0.9) 100%);
            color: var(--text-secondary);
        }

        .info-box:hover {
            transform: translate3d(0, -3px, 0) scale(1.01);
            box-shadow: 0 10px 32px rgba(33, 150, 243, 0.25),
                        0 4px 12px rgba(33, 150, 243, 0.15);
            border-left-width: 6px;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }

        .tab-content.active {
            display: block;
        }

        .empty-state {
            text-align: center;
            padding: 80px 20px;
            color: var(--text-muted);
            animation: fadeIn 0.8s ease-out;
        }

        .empty-state-icon {
            font-size: 64px;
            margin-bottom: 20px;
            animation: pulse 2s ease-in-out infinite;
            display: inline-block;
        }

        .empty-state p {
            font-size: 16px;
            font-weight: 500;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .logo-container img {
                height: clamp(80px, 12vw, 100px);
            }

            .tabs {
                flex-wrap: nowrap;
                overflow-x: auto;
            }

            .tab {
                min-width: clamp(100px, 25vw, 120px);
            }

            .result-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .language-toggle {
                flex-wrap: wrap;
            }
            
            .sticky-header-content {
                padding: 10px 20px;
                flex-direction: column;
                gap: 10px;
            }
            
            .sticky-nav {
                flex-wrap: wrap;
                justify-content: center;
                gap: 10px;
            }
            
            .sticky-nav-item {
                padding: 6px 12px;
                font-size: 14px;
            }
            
            .header h1 {
                font-size: clamp(32px, 7vw, 60px);
            }
            
            .header p {
                font-size: clamp(16px, 2.5vw, 22px);
            }
        }

        @media (max-width: 480px) {
            .form-grid {
                --grid-min-width: 100%;
                grid-template-columns: 1fr;
            }
        }

        /* Accessibility improvements */
        *:focus-visible {
            outline: 3px solid var(--primary-color);
            outline-offset: 2px;
        }

        /* Print styles */
        @media print {
            body {
                background: white;
            }

            .language-toggle,
            .theme-toggle,
            .action-buttons,
            .tabs {
                display: none;
            }

            .container {
                box-shadow: none;
            }
        }

        /* Smooth scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
            height: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--section-bg);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-dark);
        }
    </style>
</head>
<body>
<div class="scroll-progress" id="scrollProgress"></div>

<!-- Sticky Header -->
<header class="sticky-header" id="stickyHeader">
    <div class="sticky-header-content">
        <a href="#" class="sticky-logo" onclick="scrollToTop(); return false;">P3 AI</a>
        <nav class="sticky-nav">
            <a href="#assessment" class="sticky-nav-item">Assessment</a>
            <a href="#results" class="sticky-nav-item">Results</a>
            <a href="#measures" class="sticky-nav-item">Measures</a>
            <button class="theme-toggle" onclick="toggleTheme()" id="themeBtn" aria-label="Toggle dark mode">üåô</button>
            <button class="theme-toggle" onclick="toggleLanguage()" id="languageBtn" aria-label="Switch language">üá©üá™</button>
        </nav>
    </div>
</header>

<!-- Hero Section -->
<div class="logo-container scroll-section" id="hero">
    <img src="P3_lemonsplash.png" alt="P3 Logo" class="scroll-reveal-scale">
</div>

    <div class="container">
        <div class="language-toggle">
            <button class="theme-toggle" onclick="toggleTheme()" id="themeBtn2" aria-label="Toggle dark mode">üåô Dark Mode</button>
            <button onclick="toggleLanguage()" id="languageBtn2" aria-label="Switch language">üá©üá™ Deutsch</button>
        </div>
        
        <div class="header scroll-section">
            <h1 id="headerTitle" class="scroll-reveal">P3 AI Risk Assessment Tool</h1>
            <p id="headerSubtitle" class="scroll-reveal">Strategic Assessment of AI Systems for Consulting Projects</p>
        </div>
        
        <div class="tabs">
            <div class="tab active" onclick="showTab('assessment')" data-tab="assessment">Assessment</div>
            <div class="tab" onclick="showTab('results')" data-tab="results">Risk Analysis</div>
            <div class="tab" onclick="showTab('measures')" data-tab="measures">Recommendations</div>
        </div>

        <div id="assessment" class="tab-content active scroll-section">
            <div class="content">
                <div class="content-wrapper">
                <div class="form-grid scroll-reveal">
                    <div class="form-section scroll-reveal-left">
                        <h3 class="section-title" data-i18n="section.context">Project & AI System Context</h3>
                        
                        <div class="form-group">
                            <label class="form-label" data-i18n="label.projectType">Project Type / Area:</label>
                            <select id="projectType" onchange="calculateRisk()">
                                <option value="" data-i18n="option.pleaseSelect">Please select...</option>
                                <option value="strategy" data-i18n="option.strategy">Strategy Consulting & Business Development</option>
                                <option value="digital_transformation" data-i18n="option.digitalTransformation">Digital Transformation</option>
                                <option value="process_optimization" data-i18n="option.processOptimization">Process Optimization & Change Management</option>
                                <option value="software_development" data-i18n="option.softwareDevelopment">Software Development & Implementation</option>
                                <option value="data_analytics" data-i18n="option.dataAnalytics">Data Analytics & AI Solutions</option>
                                <option value="automotive" data-i18n="option.automotive">Automotive Engineering & Mobility</option>
                                <option value="internal_operations" data-i18n="option.internalOperations">Internal P3 Operations</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label" data-i18n="label.aiTool">AI Tool / System:</label>
                            <select id="aiTool" onchange="calculateRisk()">
                                <option value="" data-i18n="option.pleaseSelect">Please select...</option>
                                <optgroup label="‚úÖ Approved Tools">
                                    <option value="m365_copilot" data-i18n="option.m365Copilot">M365 Copilot</option>
                                    <option value="ai_builder" data-i18n="option.aiBuilder">AI Builder in Power Platform</option>
                                </optgroup>
                                <optgroup label="‚ö†Ô∏è Requires IT Approval">
                                    <option value="chatgpt" data-i18n="option.chatgpt">ChatGPT (OpenAI)</option>
                                    <option value="gpt4" data-i18n="option.gpt4">GPT-4 / GPT-4o (OpenAI)</option>
                                    <option value="claude" data-i18n="option.claude">Claude (Anthropic)</option>
                                    <option value="gemini" data-i18n="option.gemini">Google Gemini / Bard</option>
                                    <option value="github_copilot" data-i18n="option.githubCopilot">GitHub Copilot</option>
                                    <option value="azure_openai" data-i18n="option.azureOpenai">Azure OpenAI Service</option>
                                    <option value="aws_bedrock" data-i18n="option.awsBedrock">AWS Bedrock</option>
                                    <option value="huggingface" data-i18n="option.huggingface">HuggingFace Models</option>
                                    <option value="midjourney" data-i18n="option.midjourney">Midjourney / DALL-E (Image Gen)</option>
                                    <option value="jasper" data-i18n="option.jasper">Jasper AI</option>
                                    <option value="notion_ai" data-i18n="option.notionAi">Notion AI</option>
                                    <option value="perplexity" data-i18n="option.perplexity">Perplexity AI</option>
                                    <option value="other" data-i18n="option.otherAI">Other AI System</option>
                                </optgroup>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label" data-i18n="label.aiUseCase">AI Use Case:</label>
                            <select id="aiUseCase" onchange="calculateRisk()" multiple>
                                <option value="" data-i18n="option.pleaseSelect">Please select...</option>
                                <option value="client_advisory" data-i18n="option.clientAdvisory">Client Advisory & Insight Generation</option>
                                <option value="predictive_analytics" data-i18n="option.predictiveAnalytics">Predictive Analytics & Forecasting</option>
                                <option value="automation" data-i18n="option.automation">Process Automation</option>
                                <option value="decision_support" data-i18n="option.decisionSupport">Decision Support System</option>
                                <option value="nlp_analysis" data-i18n="option.nlpAnalysis">NLP & Document Analysis</option>
                                <option value="code_generation" data-i18n="option.codeGeneration">Code Generation & Testing</option>
                                <option value="resource_allocation" data-i18n="option.resourceAllocation">Resource & Project Allocation</option>
                                <option value="risk_assessment" data-i18n="option.riskAssessment">Risk Assessment & Compliance</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label" data-i18n="label.dataType">Processed Data Types:</label>
                            <select id="dataType" onchange="calculateRisk()" multiple>
                                <option value="" data-i18n="option.pleaseSelect">Please select...</option>
                                <option value="public_only" data-i18n="option.publicOnly">Public data only</option>
                                <option value="company_general" data-i18n="option.companyGeneral">General company data (anonymized)</option>
                                <option value="client_confidential" data-i18n="option.clientConfidential">Confidential client data</option>
                                <option value="strategic_sensitive" data-i18n="option.strategicSensitive">Strategically sensitive information</option>
                                <option value="personal_data" data-i18n="option.personalData">Personal data (employees/clients)</option>
                                <option value="special_categories" data-i18n="option.specialCategories">Special categories of personal data</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-section scroll-reveal-right">
                        <h3 class="section-title" data-i18n="section.properties">AI System Properties</h3>
                        
                        <div class="form-group">
                            <label class="form-label" data-i18n="label.autonomy">Level of Autonomy:</label>
                            <select id="autonomy" onchange="calculateRisk()">
                                <option value="" data-i18n="option.pleaseSelect">Please select...</option>
                                <option value="support_only" data-i18n="option.supportOnly">Support: AI generates suggestions/insights</option>
                                <option value="interactive" data-i18n="option.interactive">Interactive: AI communicates with stakeholders</option>
                                <option value="semi_automated" data-i18n="option.semiAutomated">Semi-automated: AI makes preliminary decisions</option>
                                <option value="automated" data-i18n="option.automated">Automated: AI makes final decisions</option>
                                <option value="critical_automated" data-i18n="option.criticalAutomated">Critical: AI makes high-impact decisions</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label" data-i18n="label.impact">Impact Scope:</label>
                            <select id="impact" onchange="calculateRisk()">
                                <option value="" data-i18n="option.pleaseSelect">Please select...</option>
                                <option value="internal_efficiency" data-i18n="option.internalEfficiency">Internal efficiency (low impact)</option>
                                <option value="project_support" data-i18n="option.projectSupport">Project support (medium impact)</option>
                                <option value="client_deliverable" data-i18n="option.clientDeliverable">Client deliverable (high impact)</option>
                                <option value="strategic_decision" data-i18n="option.strategicDecision">Strategic decision basis</option>
                                <option value="critical_operations" data-i18n="option.criticalOperations">Critical business processes</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label" data-i18n="label.transparency">AI System Transparency:</label>
                            <select id="transparency" onchange="calculateRisk()">
                                <option value="" data-i18n="option.pleaseSelect">Please select...</option>
                                <option value="high" data-i18n="option.transparencyHigh">High: Decisions fully traceable</option>
                                <option value="medium" data-i18n="option.transparencyMedium">Medium: Key factors explainable</option>
                                <option value="low" data-i18n="option.transparencyLow">Low: Black-box system</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="info-box scroll-reveal" id="infoBox1">
                    <strong>‚ö†Ô∏è P3 AI Policy:</strong> Currently, only the following AI tools are approved for use:
                    <ul style="margin: 10px 0 0 0; padding-left: 20px;">
                        <li><strong>AI Builder in Power Platform</strong> - for automation and intelligent workflows</li>
                        <li><strong>M365 Copilot</strong> - for productivity enhancement in Microsoft 365</li>
                    </ul>
                    All other AI systems (including ChatGPT, Claude, GitHub Copilot, etc.) <strong>require IT approval</strong> before use. Please contact the IT department for assessment.
                </div>
                
                <div class="info-box scroll-reveal" style="margin-top: 15px;" id="infoBox2">
                    <strong data-i18n="info.note">Note:</strong> <span data-i18n="info.disclaimer">This tool provides an initial risk assessment of AI systems in the context of P3 consulting projects, considering the EU AI Act and GDPR.</span>
                </div>
                </div>
            </div>
        </div>

        <div id="results" class="tab-content scroll-section">
            <div class="content">
                <div class="content-wrapper">
                <div id="resultsContent">
                    <div class="empty-state">
                        <div class="empty-state-icon">üìä</div>
                        <p data-i18n="empty.results">Please complete the assessment first.</p>
                    </div>
                </div>
                </div>
            </div>
        </div>

        <div id="measures" class="tab-content scroll-section">
            <div class="content">
                <div class="content-wrapper">
                <div id="measuresContent">
                    <div class="empty-state">
                        <div class="empty-state-icon">‚úÖ</div>
                        <p data-i18n="empty.measures">Please complete the assessment first.</p>
                    </div>
                </div>
                </div>
            </div>
        </div>

        <div class="action-buttons">
            <button class="btn btn-primary" onclick="downloadPDF()"><span data-i18n="btn.export">üìÑ Export Assessment (CSV)</span></button>
            <button class="btn btn-secondary" onclick="resetForm()"><span data-i18n="btn.reset">üîÑ New Assessment</span></button>
        </div>
    </div>

    <script>
        let currentAssessment = null;
        let currentLanguage = 'en'; // Default language
        let currentTheme = 'light'; // Default theme
        
        // Define approved AI tools list
        const APPROVED_AI_TOOLS = ['m365_copilot', 'ai_builder'];
        
        // Navigation delay for smooth transition when auto-navigating to results
        const AUTO_NAVIGATION_DELAY_MS = 300;
        
        // Maximum risk score components: autonomy(5) + data(5) + impact(5) + transparency(2) + unapproved_tool(3) = 20
        const MAX_RISK_SCORE = 20;
        
        // Risk scoring weights
        const AUTONOMY_SCORES = {
            'support_only': 1,
            'interactive': 2,
            'semi_automated': 3,
            'automated': 4,
            'critical_automated': 5
        };
        
        const IMPACT_SCORES = {
            'internal_efficiency': 1,
            'project_support': 2,
            'client_deliverable': 3,
            'strategic_decision': 4,
            'critical_operations': 5
        };
        
        const DATA_SCORES = {
            'public_only': 0,
            'company_general': 1,
            'client_confidential': 2,
            'strategic_sensitive': 3,
            'personal_data': 4,
            'special_categories': 5
        };

        // Theme toggle function
        function toggleTheme() {
            currentTheme = currentTheme === 'light' ? 'dark' : 'light';
            document.documentElement.setAttribute('data-theme', currentTheme);
            localStorage.setItem('theme', currentTheme);
            updateThemeButtons();
        }

        const translations = {
            en: {
                headerTitle: 'P3 AI Risk Assessment Tool',
                headerSubtitle: 'Strategic Assessment of AI Systems for Consulting Projects',
                'tab.assessment': 'Assessment',
                'tab.results': 'Risk Analysis',
                'tab.measures': 'Recommendations',
                'section.context': 'Project & AI System Context',
                'section.properties': 'AI System Properties',
                'label.projectType': 'Project Type / Area:',
                'label.aiTool': 'AI Tool / System:',
                'label.aiUseCase': 'AI Use Case:',
                'label.dataType': 'Processed Data Types:',
                'label.autonomy': 'Level of Autonomy:',
                'label.impact': 'Impact Scope:',
                'label.transparency': 'AI System Transparency:',
                'option.pleaseSelect': 'Please select...',
                'option.strategy': 'Strategy Consulting & Business Development',
                'option.digitalTransformation': 'Digital Transformation',
                'option.processOptimization': 'Process Optimization & Change Management',
                'option.softwareDevelopment': 'Software Development & Implementation',
                'option.dataAnalytics': 'Data Analytics & AI Solutions',
                'option.automotive': 'Automotive Engineering & Mobility',
                'option.internalOperations': 'Internal P3 Operations',
                'option.m365Copilot': 'M365 Copilot',
                'option.aiBuilder': 'AI Builder in Power Platform',
                'option.chatgpt': 'ChatGPT (OpenAI)',
                'option.gpt4': 'GPT-4 / GPT-4o (OpenAI)',
                'option.claude': 'Claude (Anthropic)',
                'option.gemini': 'Google Gemini / Bard',
                'option.githubCopilot': 'GitHub Copilot',
                'option.azureOpenai': 'Azure OpenAI Service',
                'option.awsBedrock': 'AWS Bedrock',
                'option.huggingface': 'HuggingFace Models',
                'option.midjourney': 'Midjourney / DALL-E (Image Gen)',
                'option.jasper': 'Jasper AI',
                'option.notionAi': 'Notion AI',
                'option.perplexity': 'Perplexity AI',
                'option.otherAI': 'Other AI System',
                'option.clientAdvisory': 'Client Advisory & Insight Generation',
                'option.predictiveAnalytics': 'Predictive Analytics & Forecasting',
                'option.automation': 'Process Automation',
                'option.decisionSupport': 'Decision Support System',
                'option.nlpAnalysis': 'NLP & Document Analysis',
                'option.codeGeneration': 'Code Generation & Testing',
                'option.resourceAllocation': 'Resource & Project Allocation',
                'option.riskAssessment': 'Risk Assessment & Compliance',
                'option.publicOnly': 'Public data only',
                'option.companyGeneral': 'General company data (anonymized)',
                'option.clientConfidential': 'Confidential client data',
                'option.strategicSensitive': 'Strategically sensitive information',
                'option.personalData': 'Personal data (employees/clients)',
                'option.specialCategories': 'Special categories of personal data',
                'option.supportOnly': 'Support: AI generates suggestions/insights',
                'option.interactive': 'Interactive: AI communicates with stakeholders',
                'option.semiAutomated': 'Semi-automated: AI makes preliminary decisions',
                'option.automated': 'Automated: AI makes final decisions',
                'option.criticalAutomated': 'Critical: AI makes high-impact decisions',
                'option.internalEfficiency': 'Internal efficiency (low impact)',
                'option.projectSupport': 'Project support (medium impact)',
                'option.clientDeliverable': 'Client deliverable (high impact)',
                'option.strategicDecision': 'Strategic decision basis',
                'option.criticalOperations': 'Critical business processes',
                'option.transparencyHigh': 'High: Decisions fully traceable',
                'option.transparencyMedium': 'Medium: Key factors explainable',
                'option.transparencyLow': 'Low: Black-box system',
                'info.note': 'Note:',
                'info.disclaimer': 'This tool provides an initial risk assessment of AI systems in the context of P3 consulting projects, considering the EU AI Act and GDPR.',
                'empty.results': 'Please complete the assessment first.',
                'empty.measures': 'Please complete the assessment first.',
                'btn.export': 'üìÑ Export Assessment (CSV)',
                'btn.reset': 'üîÑ New Assessment',
                'result.riskAssessment': 'Risk Assessment',
                'result.riskScore': 'Risk Score',
                'result.projectType': 'Project Type',
                'result.recommendedMeasures': 'Recommended Measures',
                'result.assessmentDetails': 'Assessment Details',
                'result.aiTool': 'AI Tool',
                'result.aiUseCase': 'AI Use Case',
                'result.dataType': 'Data Type',
                'result.autonomy': 'Autonomy Level',
                'result.impact': 'Impact',
                'result.transparency': 'Transparency',
                'measures.title': 'Recommended Measures',
                'risk.minimal': 'Minimal Risk',
                'risk.low': 'Low Risk',
                'risk.medium': 'Medium Risk',
                'risk.high': 'High Risk',
                'risk.critical': 'Critical Risk',
                languageBtn: 'üá©üá™ Deutsch'
            },
            de: {
                headerTitle: 'P3 AI Risk Assessment Tool',
                headerSubtitle: 'Strategische Bewertung von KI-Systemen f√ºr Consulting-Projekte',
                'tab.assessment': 'Assessment',
                'tab.results': 'Risiko-Analyse',
                'tab.measures': 'Empfehlungen',
                'section.context': 'Projekt & KI-System Kontext',
                'section.properties': 'KI-System Eigenschaften',
                'label.projectType': 'Projekttyp / Bereich:',
                'label.aiTool': 'KI-Tool / System:',
                'label.aiUseCase': 'KI-Anwendungsfall:',
                'label.dataType': 'Verarbeitete Datentypen:',
                'label.autonomy': 'Autonomiegrad:',
                'label.impact': 'Auswirkungsbereich:',
                'label.transparency': 'KI-System Transparenz:',
                'option.pleaseSelect': 'Bitte w√§hlen...',
                'option.strategy': 'Strategieberatung & Business Development',
                'option.digitalTransformation': 'Digitale Transformation',
                'option.processOptimization': 'Prozessoptimierung & Change Management',
                'option.softwareDevelopment': 'Softwareentwicklung & Implementation',
                'option.dataAnalytics': 'Data Analytics & AI Solutions',
                'option.automotive': 'Automotive Engineering & Mobility',
                'option.internalOperations': 'Interne P3-Operationen',
                'option.m365Copilot': 'M365 Copilot',
                'option.aiBuilder': 'AI Builder in Power Platform',
                'option.chatgpt': 'ChatGPT (OpenAI)',
                'option.gpt4': 'GPT-4 / GPT-4o (OpenAI)',
                'option.claude': 'Claude (Anthropic)',
                'option.gemini': 'Google Gemini / Bard',
                'option.githubCopilot': 'GitHub Copilot',
                'option.azureOpenai': 'Azure OpenAI Service',
                'option.awsBedrock': 'AWS Bedrock',
                'option.huggingface': 'HuggingFace Models',
                'option.midjourney': 'Midjourney / DALL-E (Bildgenerierung)',
                'option.jasper': 'Jasper AI',
                'option.notionAi': 'Notion AI',
                'option.perplexity': 'Perplexity AI',
                'option.otherAI': 'Anderes KI-System',
                'option.clientAdvisory': 'Client Advisory & Insight Generation',
                'option.predictiveAnalytics': 'Predictive Analytics & Forecasting',
                'option.automation': 'Prozessautomatisierung',
                'option.decisionSupport': 'Decision Support System',
                'option.nlpAnalysis': 'NLP & Document Analysis',
                'option.codeGeneration': 'Code Generation & Testing',
                'option.resourceAllocation': 'Resource & Project Allocation',
                'option.riskAssessment': 'Risk Assessment & Compliance',
                'option.publicOnly': 'Ausschlie√ülich √∂ffentliche Daten',
                'option.companyGeneral': 'Allgemeine Unternehmensdaten (anonymisiert)',
                'option.clientConfidential': 'Vertrauliche Kundendaten',
                'option.strategicSensitive': 'Strategisch sensible Informationen',
                'option.personalData': 'Personenbezogene Daten (Mitarbeiter/Kunden)',
                'option.specialCategories': 'Besondere Kategorien personenbezogener Daten',
                'option.supportOnly': 'Unterst√ºtzung: KI generiert Vorschl√§ge/Insights',
                'option.interactive': 'Interaktiv: KI kommuniziert mit Stakeholdern',
                'option.semiAutomated': 'Semi-automatisiert: KI trifft Vorentscheidungen',
                'option.automated': 'Automatisiert: KI trifft finale Entscheidungen',
                'option.criticalAutomated': 'Kritisch: KI trifft Entscheidungen mit hoher Tragweite',
                'option.internalEfficiency': 'Interne Effizienz (low impact)',
                'option.projectSupport': 'Projektunterst√ºtzung (medium impact)',
                'option.clientDeliverable': 'Client Deliverable (high impact)',
                'option.strategicDecision': 'Strategische Entscheidungsgrundlage',
                'option.criticalOperations': 'Kritische Gesch√§ftsprozesse',
                'option.transparencyHigh': 'Hoch: Entscheidungen vollst√§ndig nachvollziehbar',
                'option.transparencyMedium': 'Mittel: Wesentliche Faktoren erkl√§rbar',
                'option.transparencyLow': 'Gering: Black-Box System',
                'info.note': 'Hinweis:',
                'info.disclaimer': 'Dieses Tool bietet eine erste Einsch√§tzung zur Risikobewertung von KI-Systemen im Kontext der P3-Beratungsprojekte unter Ber√ºcksichtigung des EU AI Acts und DSGVO.',
                'empty.results': 'Bitte f√ºhren Sie zun√§chst das Assessment durch.',
                'empty.measures': 'Bitte f√ºhren Sie zun√§chst das Assessment durch.',
                'btn.export': 'üìÑ Assessment exportieren (CSV)',
                'btn.reset': 'üîÑ Neues Assessment',
                'result.riskAssessment': 'Risiko-Bewertung',
                'result.riskScore': 'Risk Score',
                'result.projectType': 'Projekttyp',
                'result.recommendedMeasures': 'Empfohlene Ma√ünahmen',
                'result.assessmentDetails': 'Assessment Details',
                'result.aiTool': 'KI-Tool',
                'result.aiUseCase': 'KI-Anwendungsfall',
                'result.dataType': 'Datentyp',
                'result.autonomy': 'Autonomiegrad',
                'result.impact': 'Impact',
                'result.transparency': 'Transparenz',
                'measures.title': 'Empfohlene Ma√ünahmen',
                'risk.minimal': 'Minimales Risiko',
                'risk.low': 'Geringes Risiko',
                'risk.medium': 'Mittleres Risiko',
                'risk.high': 'Hohes Risiko',
                'risk.critical': 'Kritisches Risiko',
                languageBtn: 'üá¨üáß English'
            }
        };

        function toggleLanguage() {
            currentLanguage = currentLanguage === 'en' ? 'de' : 'en';
            localStorage.setItem('language', currentLanguage);
            updateLanguage();
            
            // Re-render results if assessment exists
            if (currentAssessment) {
                updateResults(currentAssessment);
            }
        }

        function updateLanguage() {
            const lang = translations[currentLanguage];
            
            // Update header
            document.getElementById('headerTitle').textContent = lang.headerTitle;
            document.getElementById('headerSubtitle').textContent = lang.headerSubtitle;
            
            // Update language buttons
            const langBtns = [document.getElementById('languageBtn'), document.getElementById('languageBtn2')];
            langBtns.forEach(btn => {
                if (btn) {
                    btn.textContent = btn === langBtns[0] ? 
                        (currentLanguage === 'en' ? 'üá©üá™' : 'üá¨üáß') : 
                        lang.languageBtn;
                }
            });
            
            // Update tabs
            document.querySelector('[data-tab="assessment"]').textContent = lang['tab.assessment'];
            document.querySelector('[data-tab="results"]').textContent = lang['tab.results'];
            document.querySelector('[data-tab="measures"]').textContent = lang['tab.measures'];
            
            // Update all elements with data-i18n attribute
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (lang[key]) {
                    element.textContent = lang[key];
                }
            });
            
            // Update info boxes
            if (currentLanguage === 'de') {
                document.getElementById('infoBox1').innerHTML = `
                    <strong>‚ö†Ô∏è P3 AI Policy:</strong> Aktuell sind nur folgende KI-Tools f√ºr den Einsatz freigegeben:
                    <ul style="margin: 10px 0 0 0; padding-left: 20px;">
                        <li><strong>AI Builder in Power Platform</strong> - f√ºr Automatisierung und intelligente Workflows</li>
                        <li><strong>M365 Copilot</strong> - f√ºr Produktivit√§tssteigerung in Microsoft 365</li>
                    </ul>
                    Alle anderen KI-Systeme (einschlie√ülich ChatGPT, Claude, GitHub Copilot, etc.) <strong>ben√∂tigen eine IT-Genehmigung</strong> vor der Nutzung. Bitte kontaktieren Sie die IT-Abteilung f√ºr eine Bewertung.
                `;
            } else {
                document.getElementById('infoBox1').innerHTML = `
                    <strong>‚ö†Ô∏è P3 AI Policy:</strong> Currently, only the following AI tools are approved for use:
                    <ul style="margin: 10px 0 0 0; padding-left: 20px;">
                        <li><strong>AI Builder in Power Platform</strong> - for automation and intelligent workflows</li>
                        <li><strong>M365 Copilot</strong> - for productivity enhancement in Microsoft 365</li>
                    </ul>
                    All other AI systems (including ChatGPT, Claude, GitHub Copilot, etc.) <strong>require IT approval</strong> before use. Please contact the IT department for assessment.
                `;
            }
            
            // Update AI Tool dropdown optgroup labels
            updateAIToolDropdown();
            
            document.documentElement.lang = currentLanguage;
        }
        
        function updateAIToolDropdown() {
            const select = document.getElementById('aiTool');
            const selectedValue = select.value;
            const lang = translations[currentLanguage];
            
            const approvedLabel = currentLanguage === 'de' ? '‚úÖ Freigegebene Tools' : '‚úÖ Approved Tools';
            const requiresApprovalLabel = currentLanguage === 'de' ? '‚ö†Ô∏è Ben√∂tigt IT-Genehmigung' : '‚ö†Ô∏è Requires IT Approval';
            
            select.innerHTML = `
                <option value="" data-i18n="option.pleaseSelect">${lang['option.pleaseSelect']}</option>
                <optgroup label="${approvedLabel}">
                    <option value="m365_copilot" data-i18n="option.m365Copilot">${lang['option.m365Copilot']}</option>
                    <option value="ai_builder" data-i18n="option.aiBuilder">${lang['option.aiBuilder']}</option>
                </optgroup>
                <optgroup label="${requiresApprovalLabel}">
                    <option value="chatgpt" data-i18n="option.chatgpt">${lang['option.chatgpt']}</option>
                    <option value="gpt4" data-i18n="option.gpt4">${lang['option.gpt4']}</option>
                    <option value="claude" data-i18n="option.claude">${lang['option.claude']}</option>
                    <option value="gemini" data-i18n="option.gemini">${lang['option.gemini']}</option>
                    <option value="github_copilot" data-i18n="option.githubCopilot">${lang['option.githubCopilot']}</option>
                    <option value="azure_openai" data-i18n="option.azureOpenai">${lang['option.azureOpenai']}</option>
                    <option value="aws_bedrock" data-i18n="option.awsBedrock">${lang['option.awsBedrock']}</option>
                    <option value="huggingface" data-i18n="option.huggingface">${lang['option.huggingface']}</option>
                    <option value="midjourney" data-i18n="option.midjourney">${lang['option.midjourney']}</option>
                    <option value="jasper" data-i18n="option.jasper">${lang['option.jasper']}</option>
                    <option value="notion_ai" data-i18n="option.notionAi">${lang['option.notionAi']}</option>
                    <option value="perplexity" data-i18n="option.perplexity">${lang['option.perplexity']}</option>
                    <option value="other" data-i18n="option.otherAI">${lang['option.otherAI']}</option>
                </optgroup>
            `;
            
            // Restore the selected value if it existed
            if (selectedValue) {
                select.value = selectedValue;
            }
        }

        function showTab(tabName) {
            // Remove active class from all tabs
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            
            // Add active class to selected tab
            const tabContent = document.getElementById(tabName);
            if (tabContent) {
                tabContent.classList.add('active');
            }
            
            // Activate the corresponding tab button
            const tabButton = document.querySelector(`.tab[data-tab="${tabName}"]`);
            if (tabButton) {
                tabButton.classList.add('active');
            }
            
            // Smooth scroll to the section
            const section = document.getElementById(tabName);
            if (section) {
                section.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }
        
        // Add smooth scrolling for sticky nav links
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.sticky-nav-item').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href').substring(1);
                    const targetSection = document.getElementById(targetId);
                    
                    if (targetSection) {
                        // Show the tab
                        showTab(targetId);
                    }
                });
            });
        });
        
        function getSelectedValues(selectId) {
            const select = document.getElementById(selectId);
            if (select.multiple) {
                return Array.from(select.selectedOptions).map(option => option.value).filter(value => value !== '');
            } else {
                return select.value;
            }
        }

        function getCombinedDataScore(dataTypes) {
            if (!Array.isArray(dataTypes) || dataTypes.length === 0) return 0;
            return Math.max(...dataTypes.map(type => DATA_SCORES[type] || 0));
        }
        
        function getSelectedLabels(selectId) {
            const select = document.getElementById(selectId);
            if (select.multiple) {
                return Array.from(select.selectedOptions).map(option => option.text).filter(text => !text.includes('...'));
            } else {
                const selectedOption = select.options[select.selectedIndex];
                return selectedOption ? selectedOption.text : '';
            }
        }

        function calculateRisk() {
            const projectType = getSelectedValues('projectType');
            const aiTool = getSelectedValues('aiTool');
            const aiUseCases = getSelectedValues('aiUseCase');
            const dataTypes = getSelectedValues('dataType');
            const autonomy = getSelectedValues('autonomy');
            const impact = getSelectedValues('impact');
            const transparency = getSelectedValues('transparency');
            
            if (!projectType || !aiTool || aiUseCases.length === 0 || dataTypes.length === 0 || !autonomy || !impact || !transparency) {
                return;
            }
            
            currentAssessment = performAssessment(projectType, aiTool, aiUseCases, dataTypes, autonomy, impact, transparency);
            updateResults(currentAssessment);
            
            // Automatically navigate to results tab when form is complete
            setTimeout(() => {
                showTab('results');
                // Scroll to top of page for better user experience
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }, AUTO_NAVIGATION_DELAY_MS);
        }

        function performAssessment(projectType, aiTool, aiUseCases, dataTypes, autonomy, impact, transparency) {
            let riskScore = 0;
            let measures = [];
            
            // Check if tool requires approval
            if (!APPROVED_AI_TOOLS.includes(aiTool)) {
                riskScore += 3;
                measures.push({
                    title: currentLanguage === 'de' ? 'üö® IT-GENEHMIGUNG ERFORDERLICH' : 'üö® IT APPROVAL REQUIRED',
                    description: currentLanguage === 'de' 
                        ? 'Dieses KI-System ist nicht freigegeben! Gem√§√ü P3 AI Policy muss dieses Tool vor dem Einsatz durch die IT-Abteilung gepr√ºft und genehmigt werden. Bitte kontaktieren Sie das IT-Team f√ºr eine Bewertung.'
                        : 'This AI system is not approved! According to P3 AI Policy, this tool must be reviewed and approved by the IT department before deployment. Please contact the IT team for an assessment.'
                });
            }
            
            riskScore += AUTONOMY_SCORES[autonomy] || 0;
            
            const maxDataScore = getCombinedDataScore(dataTypes);
            riskScore += maxDataScore;
            
            riskScore += IMPACT_SCORES[impact] || 0;
            
            if (transparency === 'low') riskScore += 2;
            else if (transparency === 'medium') riskScore += 1;
            
            let riskLevel = 'minimal';
            if (!APPROVED_AI_TOOLS.includes(aiTool) || riskScore >= 13) riskLevel = 'critical';
            else if (riskScore >= 10) riskLevel = 'high';
            else if (riskScore >= 7) riskLevel = 'medium';
            else if (riskScore >= 4) riskLevel = 'low';
            
            measures = generateMeasures(riskLevel, aiTool, autonomy, dataTypes, impact, transparency, aiUseCases, measures);
            
            return {
                riskLevel,
                riskScore,
                projectType,
                aiTool,
                aiUseCases,
                dataTypes,
                autonomy,
                impact,
                transparency,
                measures
            };
        }

        function generateMeasures(riskLevel, aiTool, autonomy, dataTypes, impact, transparency, aiUseCases, measures) {
            const isGerman = currentLanguage === 'de';
            
            if (APPROVED_AI_TOOLS.includes(aiTool)) {
                measures.push({
                    title: isGerman ? '‚úÖ P3-freigegebenes Tool' : '‚úÖ P3-approved Tool',
                    description: isGerman 
                        ? 'Dieses KI-System ist gem√§√ü P3 AI Policy freigegeben und kann nach Beachtung der Sicherheits- und Compliance-Richtlinien eingesetzt werden.'
                        : 'This AI system is approved according to P3 AI Policy and can be deployed following security and compliance guidelines.'
                });
            }
            
            if (riskLevel === 'critical') {
                measures.push({
                    title: isGerman ? 'Hochrisiko-System gem√§√ü EU AI Act' : 'High-risk System under EU AI Act',
                    description: isGerman 
                        ? 'Umfassende Konformit√§tsbewertung erforderlich. Dokumentation aller technischen Spezifikationen, Risikomanagement und Qualit√§tssicherung.'
                        : 'Comprehensive conformity assessment required. Documentation of all technical specifications, risk management and quality assurance.'
                });
                measures.push({
                    title: isGerman ? 'Executive Approval' : 'Executive Approval',
                    description: isGerman 
                        ? 'Projekt erfordert Freigabe durch P3 Management und ggf. Client C-Level vor Deployment.'
                        : 'Project requires approval from P3 Management and possibly client C-Level before deployment.'
                });
            }
            
            if (riskLevel === 'high' || riskLevel === 'critical') {
                measures.push({
                    title: 'Human Oversight',
                    description: isGerman 
                        ? 'Implementierung eines robusten Human-in-the-Loop Systems. Kritische KI-Entscheidungen m√ºssen von qualifizierten Consultants validiert werden.'
                        : 'Implementation of a robust Human-in-the-Loop system. Critical AI decisions must be validated by qualified consultants.'
                });
                measures.push({
                    title: 'Bias & Fairness Testing',
                    description: isGerman 
                        ? 'Systematische √úberpr√ºfung auf Verzerrungen und Diskriminierung. Besonders wichtig bei Entscheidungen mit personellem Impact.'
                        : 'Systematic review for bias and discrimination. Especially important for decisions with personnel impact.'
                });
            }
            
            if (dataTypes.includes('personal_data') || dataTypes.includes('special_categories')) {
                measures.push({
                    title: isGerman ? 'DSGVO Compliance' : 'GDPR Compliance',
                    description: isGerman 
                        ? 'Data Protection Impact Assessment (DPIA) durchf√ºhren. Rechtsgrundlage pr√ºfen, Betroffenenrechte sicherstellen.'
                        : 'Conduct Data Protection Impact Assessment (DPIA). Review legal basis, ensure data subject rights.'
                });
                measures.push({
                    title: isGerman ? 'Data Minimization' : 'Data Minimization',
                    description: isGerman 
                        ? 'Nur absolut notwendige Daten verarbeiten. Anonymisierung/Pseudonymisierung wo m√∂glich implementieren.'
                        : 'Process only absolutely necessary data. Implement anonymization/pseudonymization where possible.'
                });
            }
            
            if (dataTypes.includes('client_confidential') || dataTypes.includes('strategic_sensitive')) {
                measures.push({
                    title: isGerman ? 'Vertraulichkeit & IP-Schutz' : 'Confidentiality & IP Protection',
                    description: isGerman 
                        ? 'NDA-Compliance sicherstellen. Bei externen KI-Services: On-Premise oder Private-Cloud L√∂sung bevorzugen. Data Residency Requirements pr√ºfen.'
                        : 'Ensure NDA compliance. For external AI services: prefer on-premise or private cloud solutions. Review data residency requirements.'
                });
            }
            
            if (transparency === 'low') {
                measures.push({
                    title: 'Explainability Enhancement',
                    description: isGerman 
                        ? 'Explainable AI Techniken implementieren (LIME, SHAP). Dokumentation der Modell-Logik f√ºr Client Transparency.'
                        : 'Implement Explainable AI techniques (LIME, SHAP). Document model logic for client transparency.'
                });
            }
            
            if (autonomy === 'automated' || autonomy === 'critical_automated') {
                measures.push({
                    title: 'Monitoring & Audit Trail',
                    description: isGerman 
                        ? 'Continuous Monitoring der KI-Entscheidungen. Vollst√§ndige Logging-Infrastruktur f√ºr Audits und Fehleranalyse.'
                        : 'Continuous monitoring of AI decisions. Complete logging infrastructure for audits and error analysis.'
                });
            }
            
            if (aiUseCases.includes('risk_assessment')) {
                measures.push({
                    title: isGerman ? 'Validierung & Backtesting' : 'Validation & Backtesting',
                    description: isGerman 
                        ? 'Regelm√§√üige Validierung der Risk-Assessment-Modelle gegen Real-World Outcomes. Confidence Intervals transparent kommunizieren.'
                        : 'Regular validation of risk assessment models against real-world outcomes. Communicate confidence intervals transparently.'
                });
            }
            
            if (aiUseCases.includes('code_generation')) {
                measures.push({
                    title: 'Security Review',
                    description: isGerman 
                        ? 'Code-Reviews f√ºr KI-generierten Code verpflichtend. Security Scanning und Vulnerability Assessment integrieren.'
                        : 'Mandatory code reviews for AI-generated code. Integrate security scanning and vulnerability assessment.'
                });
            }
            
            measures.push({
                title: isGerman ? 'Dokumentation & Governance' : 'Documentation & Governance',
                description: isGerman 
                    ? 'AI Model Card erstellen: Zweck, Limitationen, Training Data, Performance Metrics. Version Control f√ºr Model Updates.'
                    : 'Create AI Model Card: purpose, limitations, training data, performance metrics. Version control for model updates.'
            });
            
            measures.push({
                title: 'Stakeholder Communication',
                description: isGerman 
                    ? 'Transparente Kommunikation √ºber KI-Einsatz gegen√ºber Kunden und betroffenen Personen. Klare Verantwortlichkeiten definieren.'
                    : 'Transparent communication about AI deployment to clients and affected persons. Define clear responsibilities.'
            });
            
            return measures;
        }

        function updateResults(assessment) {
            const lang = translations[currentLanguage];
            const riskClass = `risk-${assessment.riskLevel}`;
            const riskLabel = lang[`risk.${assessment.riskLevel}`];
            
            // Generate risk level explanation
            const riskExplanations = {
                'minimal': currentLanguage === 'de' 
                    ? 'Das KI-System stellt nur ein minimales Risiko dar. Es k√∂nnen Standardsicherheitsma√ünahmen angewendet werden.'
                    : 'The AI system poses only minimal risk. Standard security measures can be applied.',
                'low': currentLanguage === 'de'
                    ? 'Das KI-System hat ein geringes Risiko. Grundlegende √úberwachung und Dokumentation sind erforderlich.'
                    : 'The AI system has low risk. Basic monitoring and documentation are required.',
                'medium': currentLanguage === 'de'
                    ? 'Das KI-System hat ein mittleres Risiko. Erweiterte Kontrollen und regelm√§√üige √úberpr√ºfungen sind notwendig.'
                    : 'The AI system has medium risk. Enhanced controls and regular reviews are necessary.',
                'high': currentLanguage === 'de'
                    ? 'Das KI-System hat ein hohes Risiko. Umfassende Risikomanagement-Ma√ünahmen und kontinuierliche √úberwachung sind erforderlich.'
                    : 'The AI system has high risk. Comprehensive risk management measures and continuous monitoring are required.',
                'critical': currentLanguage === 'de'
                    ? 'Das KI-System hat ein kritisches Risiko. Vollst√§ndige Compliance-Bewertung, Management-Genehmigung und strenge Kontrollen sind zwingend erforderlich.'
                    : 'The AI system has critical risk. Full compliance assessment, management approval, and strict controls are mandatory.'
            };
            
            const autonomyScore = AUTONOMY_SCORES[assessment.autonomy] || 0;
            const dataScore = getCombinedDataScore(assessment.dataTypes);
            const impactScore = IMPACT_SCORES[assessment.impact] || 0;
            const transparencyScore = assessment.transparency === 'low' ? 2 : (assessment.transparency === 'medium' ? 1 : 0);
            const toolApprovalScore = APPROVED_AI_TOOLS.includes(assessment.aiTool) ? 0 : 3;
            
            // Generate compliance requirements
            let complianceReqs = [];
            if (assessment.dataTypes.includes('personal_data') || assessment.dataTypes.includes('special_categories')) {
                complianceReqs.push(currentLanguage === 'de' ? 'DSGVO/GDPR Compliance' : 'GDPR Compliance');
            }
            if (assessment.riskLevel === 'critical' || assessment.riskLevel === 'high') {
                complianceReqs.push(currentLanguage === 'de' ? 'EU AI Act - Hochrisiko-System' : 'EU AI Act - High-Risk System');
            }
            if (!APPROVED_AI_TOOLS.includes(assessment.aiTool)) {
                complianceReqs.push(currentLanguage === 'de' ? 'P3 IT-Genehmigung erforderlich' : 'P3 IT Approval Required');
            }
            if (assessment.dataTypes.includes('client_confidential') || assessment.dataTypes.includes('strategic_sensitive')) {
                complianceReqs.push('NDA Compliance');
            }
            
            document.getElementById('resultsContent').innerHTML = `
                <div class="result-card scroll-reveal-scale">
                    <div class="result-header">
                        <div class="result-title">${lang['result.riskAssessment']}</div>
                        <span class="risk-badge ${riskClass}">${riskLabel}</span>
                    </div>
                    <p style="margin-top: 15px; padding: 15px; background: #f8f9fa; border-radius: 6px; line-height: 1.6;">
                        ${riskExplanations[assessment.riskLevel]}
                    </p>
                    <p style="margin-top: 15px;"><strong>${lang['result.riskScore']}:</strong> ${assessment.riskScore}/${MAX_RISK_SCORE}</p>
                    <p><strong>${lang['result.projectType']}:</strong> ${getSelectedLabels('projectType')}</p>
                    <p><strong>${lang['result.recommendedMeasures']}:</strong> ${assessment.measures.length}</p>
                </div>
                
                <div class="result-card scroll-reveal">
                    <div class="result-title">${currentLanguage === 'de' ? 'Risikoanalyse nach Kategorien' : 'Risk Breakdown by Category'}</div>
                    <div style="margin-top: 15px;">
                        <div style="display: flex; justify-content: space-between; padding: 10px; background: #f8f9fa; margin-bottom: 8px; border-radius: 4px;">
                            <span><strong>${currentLanguage === 'de' ? 'Autonomiegrad' : 'Autonomy Level'}:</strong></span>
                            <span>${autonomyScore}/5 ${currentLanguage === 'de' ? 'Punkte' : 'points'}</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 10px; background: #f8f9fa; margin-bottom: 8px; border-radius: 4px;">
                            <span><strong>${currentLanguage === 'de' ? 'Datensensibilit√§t' : 'Data Sensitivity'}:</strong></span>
                            <span>${dataScore}/5 ${currentLanguage === 'de' ? 'Punkte' : 'points'}</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 10px; background: #f8f9fa; margin-bottom: 8px; border-radius: 4px;">
                            <span><strong>${currentLanguage === 'de' ? 'Auswirkungsbereich' : 'Impact Scope'}:</strong></span>
                            <span>${impactScore}/5 ${currentLanguage === 'de' ? 'Punkte' : 'points'}</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 10px; background: #f8f9fa; margin-bottom: 8px; border-radius: 4px;">
                            <span><strong>${currentLanguage === 'de' ? 'Transparenzmangel' : 'Transparency Gap'}:</strong></span>
                            <span>${transparencyScore}/2 ${currentLanguage === 'de' ? 'Punkte' : 'points'}</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 10px; background: #f8f9fa; margin-bottom: 8px; border-radius: 4px;">
                            <span><strong>${currentLanguage === 'de' ? 'Tool-Genehmigungsstatus' : 'Tool Approval Status'}:</strong></span>
                            <span>${toolApprovalScore}/3 ${currentLanguage === 'de' ? 'Punkte' : 'points'}</span>
                        </div>
                    </div>
                </div>
                
                <div class="result-card scroll-reveal-left">
                    <div class="result-title">${currentLanguage === 'de' ? 'Datensensibilit√§ts-Analyse' : 'Data Sensitivity Analysis'}</div>
                    <p style="margin-top: 10px;"><strong>${currentLanguage === 'de' ? 'Verarbeitete Datentypen' : 'Processed Data Types'}:</strong></p>
                    <ul style="margin: 10px 0; padding-left: 20px;">
                        ${getSelectedLabels('dataType').map(label => `<li>${label}</li>`).join('')}
                    </ul>
                    ${assessment.dataTypes.includes('personal_data') || assessment.dataTypes.includes('special_categories') ? `
                        <div style="margin-top: 15px; padding: 12px; background: #fff3cd; border-left: 4px solid #856404; border-radius: 4px;">
                            <strong>‚ö†Ô∏è ${currentLanguage === 'de' ? 'Personenbezogene Daten' : 'Personal Data'}:</strong>
                            ${currentLanguage === 'de' 
                                ? 'DSGVO-Compliance ist erforderlich. Data Protection Impact Assessment (DPIA) muss durchgef√ºhrt werden.'
                                : 'GDPR compliance is required. Data Protection Impact Assessment (DPIA) must be conducted.'}
                        </div>
                    ` : ''}
                    ${assessment.dataTypes.includes('client_confidential') || assessment.dataTypes.includes('strategic_sensitive') ? `
                        <div style="margin-top: 15px; padding: 12px; background: #fff3cd; border-left: 4px solid #856404; border-radius: 4px;">
                            <strong>‚ö†Ô∏è ${currentLanguage === 'de' ? 'Vertrauliche Daten' : 'Confidential Data'}:</strong>
                            ${currentLanguage === 'de'
                                ? 'Besondere Vertraulichkeitsma√ünahmen und NDA-Compliance erforderlich.'
                                : 'Special confidentiality measures and NDA compliance required.'}
                        </div>
                    ` : ''}
                </div>
                
                <div class="result-card scroll-reveal-right">
                    <div class="result-title">${currentLanguage === 'de' ? 'Compliance-Anforderungen' : 'Compliance Requirements'}</div>
                    ${complianceReqs.length > 0 ? `
                        <ul style="margin: 15px 0; padding-left: 20px;">
                            ${complianceReqs.map(req => `<li style="margin-bottom: 8px;">${req}</li>`).join('')}
                        </ul>
                    ` : `
                        <p style="margin-top: 10px; color: #28a745;">
                            ‚úÖ ${currentLanguage === 'de' 
                                ? 'Standard-Compliance-Anforderungen gelten.'
                                : 'Standard compliance requirements apply.'}
                        </p>
                    `}
                </div>
                
                <div class="result-card scroll-reveal-scale">
                    <div class="result-title">${lang['result.assessmentDetails']}</div>
                    <p><strong>${lang['result.aiTool']}:</strong> ${getSelectedLabels('aiTool')}</p>
                    <p><strong>${lang['result.aiUseCase']}:</strong> ${getSelectedLabels('aiUseCase').join(', ')}</p>
                    <p><strong>${lang['result.dataType']}:</strong> ${getSelectedLabels('dataType').join(', ')}</p>
                    <p><strong>${lang['result.autonomy']}:</strong> ${getSelectedLabels('autonomy')}</p>
                    <p><strong>${lang['result.impact']}:</strong> ${getSelectedLabels('impact')}</p>
                    <p><strong>${lang['result.transparency']}:</strong> ${getSelectedLabels('transparency')}</p>
                </div>
            `;
            
            let measuresHTML = `<h3 class="section-title scroll-reveal">${lang['measures.title']}</h3>`;
            assessment.measures.forEach((measure, index) => {
                const revealClass = index % 2 === 0 ? 'scroll-reveal-left' : 'scroll-reveal-right';
                measuresHTML += `
                    <div class="measure-item ${revealClass}">
                        <div class="measure-title">${index + 1}. ${measure.title}</div>
                        <div>${measure.description}</div>
                    </div>
                `;
            });
            
            document.getElementById('measuresContent').innerHTML = measuresHTML;
            
            // Re-setup scroll reveal for dynamically added elements
            setTimeout(() => {
                setupScrollReveal();
            }, 100);
        }

        function downloadPDF() {
            if (!currentAssessment) {
                alert(currentLanguage === 'de' 
                    ? 'Bitte f√ºhren Sie zun√§chst das Assessment durch.' 
                    : 'Please complete the assessment first.');
                return;
            }
            
            const aiUseCasesLabel = getSelectedLabels('aiUseCase').join(' | ');
            const dataTypesLabel = getSelectedLabels('dataType').join(' | ');
            const lang = translations[currentLanguage];
            
            const rows = [
                currentLanguage === 'de' ? 'Kategorie;Wert' : 'Category;Value',
                `${currentLanguage === 'de' ? 'Risikostufe' : 'Risk Level'};${lang[`risk.${currentAssessment.riskLevel}`]}`,
                `Risk Score;${currentAssessment.riskScore}/${MAX_RISK_SCORE}`,
                `${lang['result.projectType']};${getSelectedLabels('projectType')}`,
                `${lang['result.aiTool']};${getSelectedLabels('aiTool')}`,
                `${lang['result.aiUseCase']};"${aiUseCasesLabel.replace(/"/g, '""')}"`,
                `${lang['result.dataType']};"${dataTypesLabel.replace(/"/g, '""')}"`,
                `${lang['result.autonomy']};${getSelectedLabels('autonomy')}`,
                `${lang['result.impact']};${getSelectedLabels('impact')}`,
                `${lang['result.transparency']};${getSelectedLabels('transparency')}`,
                '',
                lang['measures.title']
            ];
            
            currentAssessment.measures.forEach((measure, index) => {
                rows.push(`${index + 1}. ${measure.title};"${measure.description.replace(/"/g, '""')}"`);
            });
            
            const bom = new Uint8Array([0xEF, 0xBB, 0xBF]);
            const blob = new Blob([bom, rows.join('\n')], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `P3_AI_Risk_Assessment_${new Date().toISOString().split('T')[0]}.csv`;
            link.click();
        }

        function resetForm() {
            document.querySelectorAll('select').forEach(select => {
                if (select.multiple) {
                    Array.from(select.options).forEach(option => option.selected = false);
                } else {
                    select.value = '';
                }
            });
            
            currentAssessment = null;
            const lang = translations[currentLanguage];
            
            document.getElementById('resultsContent').innerHTML = `
                <div class="empty-state">
                    <div class="empty-state-icon">üìä</div>
                    <p>${lang['empty.results']}</p>
                </div>
            `;
            
            document.getElementById('measuresContent').innerHTML = `
                <div class="empty-state">
                    <div class="empty-state-icon">‚úÖ</div>
                    <p>${lang['empty.measures']}</p>
                </div>
            `;
            
            showTab('assessment');
        }

        // Initialize language and theme on page load
        window.onload = function() {
            const savedLanguage = localStorage.getItem('language');
            if (savedLanguage) {
                currentLanguage = savedLanguage;
            }
            updateLanguage();
            
            // Initialize theme
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme) {
                currentTheme = savedTheme;
                document.documentElement.setAttribute('data-theme', currentTheme);
                updateThemeButtons();
            }
            
            // Initialize scroll effects
            initScrollEffects();
            setupScrollReveal();
        };
        
        function updateThemeButtons() {
            const themeBtns = [document.getElementById('themeBtn'), document.getElementById('themeBtn2')];
            themeBtns.forEach(btn => {
                if (btn) {
                    if (currentTheme === 'dark') {
                        btn.textContent = btn === themeBtns[0] ? '‚òÄÔ∏è' : '‚òÄÔ∏è Light Mode';
                    } else {
                        btn.textContent = btn === themeBtns[0] ? 'üåô' : 'üåô Dark Mode';
                    }
                }
            });
        }
        
        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        // Scroll effects
        function initScrollEffects() {
            const stickyHeader = document.getElementById('stickyHeader');
            const scrollProgress = document.getElementById('scrollProgress');
            let lastScroll = 0;
            
            window.addEventListener('scroll', () => {
                const currentScroll = window.pageYOffset;
                const windowHeight = document.documentElement.scrollHeight - window.innerHeight;
                const progress = (currentScroll / windowHeight) * 100;
                
                // Update scroll progress bar
                scrollProgress.style.width = progress + '%';
                
                // Hide/show sticky header based on scroll direction
                if (currentScroll > 100) {
                    if (currentScroll > lastScroll) {
                        // Scrolling down
                        stickyHeader.classList.add('hidden');
                    } else {
                        // Scrolling up
                        stickyHeader.classList.remove('hidden');
                    }
                } else {
                    // At top of page
                    stickyHeader.classList.remove('hidden');
                }
                
                lastScroll = currentScroll;
            });
        }
        
        // Setup scroll reveal animations
        function setupScrollReveal() {
            const revealElements = document.querySelectorAll('.scroll-reveal, .scroll-reveal-left, .scroll-reveal-right, .scroll-reveal-scale');
            
            const revealObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('revealed');
                    }
                });
            }, {
                threshold: 0.1,
                rootMargin: '0px 0px -100px 0px'
            });
            
            revealElements.forEach(el => {
                revealObserver.observe(el);
            });
        }
        
        // Intersection Observer for scroll animations (legacy support)
        function observeElements() {
            setupScrollReveal();
        }
    </script>
</body>
</html>
